<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

        let choice = ["Rock", "Paper", "Scissors"]
        let computerChoiceArrayNumber;

        let playerTypedString;
        let playerChoiceArrayNumber;

        let playerScore = 0;
        let computerScore = 0;

        playTheGame();

        function playTheGame(){
            playerScore = 0;
            computerScore = 0;

            for (let i = 0; i < 5; i++){
                getPlayerInput();

                if(playerTypedString){
                determineWinner(playerTypedString, getComputerChoice());
                }
            }
            if(playerScore > computerScore){
            alert(`Your score: ${playerScore}\nComputer's score: ${computerScore}\nYou win!`);
            }else if(playerScore < computerScore){
                alert(`Your score: ${playerScore}\nComputer's score: ${computerScore}\nYou loose.`);
            }
            else{
                alert(`Your score: ${playerScore}\nComputer's score: ${computerScore}\nDraw.`);
            }

            if(confirm("Do you want to play again?")){
                playTheGame();
            }
        }

        function getComputerChoice(){
            computerChoiceArrayNumber = Math.floor(Math.random() * 3);
            return computerChoiceArrayNumber;
        }

        function getPlayerChoiceArayNumber(playerString){

            if(playerString.charAt(0) === "r"){
                playerChoiceArrayNumber = 0;
            }
            else if(playerString.charAt(0) === "p"){
                playerChoiceArrayNumber = 1;
            }
            else if(playerString.charAt(0) === "s"){
                playerChoiceArrayNumber = 2;
            }
            else{
                playerChoiceArrayNumber = null;
            }
        }

        function getPlayerInput(){
                playerTypedString = prompt("Enter your choice", "rock, paper or scissor").toLowerCase();
        }

        function determineWinner(currentPlayerString, currentComputerChoiceArrayNumber){
            getPlayerChoiceArayNumber(currentPlayerString);
            let result;

            if(playerChoiceArrayNumber === null){
                result = "Invalid input. Try again.";
            }
            else if(playerChoiceArrayNumber === currentComputerChoiceArrayNumber){
                result = `You picked ${choice[playerChoiceArrayNumber]} and the computer picked ${choice[currentComputerChoiceArrayNumber]} as well.\nThat's a draw.`
            }
            else if((playerChoiceArrayNumber === 0 && currentComputerChoiceArrayNumber === 2) || (playerChoiceArrayNumber === 1 && currentComputerChoiceArrayNumber === 0) || (playerChoiceArrayNumber === 2 && currentComputerChoiceArrayNumber === 1)){
                result = `You picked ${choice[playerChoiceArrayNumber]} and the computer picked ${choice[currentComputerChoiceArrayNumber]}.\nYou win this round!`
                playerScore++;
                console.log(playerScore);
            }
            else{
                result = `You picked ${choice[playerChoiceArrayNumber]} and the computer picked ${choice[currentComputerChoiceArrayNumber]}.\nYou loose this round.`
                computerScore++;
                console.log(computerScore);
            }

            alert(result);

        }

    </script>
</body>
</html>